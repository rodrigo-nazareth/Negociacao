/******************************************************************************/
/***               Generated by IBExpert 12/04/2020 17:12:24                ***/
/******************************************************************************/

/******************************************************************************/
/***      Following SET SQL DIALECT is just for the Database Comparer       ***/
/******************************************************************************/
SET SQL DIALECT 3;



/******************************************************************************/
/***                                 Tables                                 ***/
/******************************************************************************/


CREATE GENERATOR GEN_PESSOAS_ID;

CREATE TABLE PESSOAS (
    PESSOA_ID      INTEGER NOT NULL,
    RAZAO_SOCIAL   VARCHAR(150) CHARACTER SET WIN1257 NOT NULL,
    NOME_FANTASIA  VARCHAR(50) CHARACTER SET WIN1257,
    CPF_CNPJ       VARCHAR(18) NOT NULL,
    TIPO_PESSOA    CHAR(3) NOT NULL
);




/* Check constraints definition */

ALTER TABLE PESSOAS ADD CONSTRAINT CK_TIPO_PESSOA CHECK (TIPO_PESSOA in('PRO', 'DIS'));


/******************************************************************************/
/***                              Primary Keys                              ***/
/******************************************************************************/

ALTER TABLE PESSOAS ADD CONSTRAINT PK_PESSOAS PRIMARY KEY (PESSOA_ID);


/******************************************************************************/
/***                                Indices                                 ***/
/******************************************************************************/

CREATE INDEX IDX_PESSOAS_ID ON PESSOAS (PESSOA_ID);


/******************************************************************************/
/***                                Triggers                                ***/
/******************************************************************************/


SET TERM ^ ;



/******************************************************************************/
/***                          Triggers for tables                           ***/
/******************************************************************************/



/* Trigger: PESSOAS_BI */
CREATE OR ALTER TRIGGER PESSOAS_BI FOR PESSOAS
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if (new.pessoa_id is null) then
    new.pessoa_id = gen_id(gen_pessoas_id,1);
end
^


SET TERM ; ^



/******************************************************************************/
/***                              Descriptions                              ***/
/******************************************************************************/

COMMENT ON TABLE PESSOAS IS 
'Definição da coluna TIPO_PESSOA:
PRO - Produtor
DIS - Distribuidor';



/******************************************************************************/
/***                               Privileges                               ***/
/******************************************************************************/
